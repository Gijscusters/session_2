---
title: "Session_2"
author: "Gijs Custers"
date: "18 mei 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


Exercise set 3, Task 6-11

``` {r}

library(tidyverse)
data(mpg, package = "ggplot2")
mpg %>% tbl_df

mpg %>% select(manufacturer, model, displ, year, cyl, trans, cty, hwy)
mpg2 <- mpg %>% select(manufacturer, model, displ, year, cyl, trans, cty, hwy)

mpg2 %>% mutate(displ2 = displ^2, vol_per_cyl = displ/cyl)

mpg3 <- mpg2 %>% mutate(displ2 = displ^2, vol_per_cyl = displ/cyl)
mpg3 %>% arrange(desc(vol_per_cyl))

mpg3 %>% filter(manufacturer == "chevrolet") %>% arrange(desc(vol_per_cyl))

mpg4 <- mpg3 %>% group_by(manufacturer, year) %>% summarise(max_vol_per_cyl = max(vol_per_cyl))

library(tidyr)

mpg5 <- mpg4 %>% spread(year,max_vol_per_cyl)

mpg6 <- mpg5 %>% mutate(change = `2008`-`1999`)

mpg6

mpg6 %>% rename(max_vpc_1999 = `1999`, max_vpc_2008 = `2008`) %>% gather(variable, value, max_vpc_1999, max_vpc_2008, change) %>% View


```